{% extends 'delivery/base-generation.html' %}

{% load static %}

{% block title %}<title>News</title>{% endblock %}

{% block sidebar %}
<header id="header" class="header header_news">
    <div class="logo">
        <img src="{% static 'images/logo.png' %}" alt="Logo">
        <div class="logo__title">News</div>
        <div class="logo__company-name">kallyas</div>
    </div>
    <div class="trigram" id="trigram">
        <div class="trigram__line"></div>
        <div class="trigram__line"></div>
        <div class="trigram__line"></div>
    </div>
    <div class="header__options">
        <a href="#" class="header__logout">logout</a>
        <a href="" class="header__languages">languages</a>
        <ul class="header__social-networks">
            <li class="header__icon"><i class="fab fa-telegram-plane"></i></li>
            <li class="header__icon"><i class="fab fa-vk"></i></li>
            <li class="header__icon"><i class="fab fa-twitter"></i></li>
        </ul>
        <input type="text" class="header__search" placeholder="Search...">
    </div>
    </nav>
    <nav class="nav">
        <ul class="nav__menu">
            <li class="nav__item"><a href="{% url 'index' %}" class="nav__link">home</a></li>
            <li class="nav__item"><a href="#" class="nav__link">company</a></li>
            <li class="nav__item"><a href="{% url 'vehisles' %}?filters=off" class="nav__link">vehisles</a></li>
            <li class="nav__item"><a href="{% url 'news' %}" class="nav__link">news</a></li>
            <li class="nav__item"><a href="#" class="nav__link">contact</a></li>
        </ul>
    </nav>
</header>
{% endblock %}

{% block content %}
<div id="important-news" class="important-news">
    <div class="title title_important-news">
        <div class="title__header">Important</div>
        <div class="title__underline"></div>
    </div>
    <div id="important-news__button_right" class="important-news__button important-news__button_right">&gt;</div>
    <ul id="important-news__list" class="important-news__list">
        {% for important_news in important_news_list %}
        {% if important_news.important_status %}

        <li class="important-news__item">
            <img src="{{important_news.title_image.url}}" alt="" class="important-news__image">
            <div class="important-news__header">
                <a href="{% url 'news_single' pk=important_news.pk %}"
                    class="important-news__link">{{important_news.title}}</a>
            </div>
            <div class="important-news__shadow"></div>
        </li>

        {% endif %}
        {% endfor %}
    </ul>
</div>

<div class="news-content">
    <div class="title title_news-content">
        <div class="title__header">News</div>
        <div class="title__extra">All news about our company</div>
    </div>
    <ul class="news-content__list">
        {% for news in page_obj %}
        {% if news.title_image != 'none' %}
        <li class="news-content__item">
            <img class="news-content__image" src="{{news.title_image.url}}">
            <div class="news-content__text-container">
                <div class="news-content__header">
                    <a href="{% url 'news_single' pk=news.pk %}" class="news-content__link">{{news.title}}</a>
                </div>
                <div maxlength=100 class="news-content__text">{{news.short_description}}</div>
            </div>
        </li>
        {% else %}
        <li class="news-content__item">
            <div class="news-content__text-container">
                <div class="title title_news-content__item">
                    <a href="{% url 'news_single' pk=news.pk %}" class="title__header">{{news.title}}</a>
                    <div class="title__underline"></div>
                </div>
                <div class="news-content__description">
                    {{news.short_description}}
                </div>
            </div>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</div>
<div class="pagination">
    <ul class="pagination__list">
        {% if page_obj.number != 1 %}
            {% if page_obj.number != 2 %}
                <li class="pagination__item">
                    <a href="?page=1&news_per_page={{news_per_page}}{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">&lt;&lt;</a>
                </li>
            {% endif %}
            <li class="pagination__item">
                <a href="?page={{page_obj.previous_page_number}}&news_per_page={{news_per_page}}{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
                    class="pagination__link">{{page_obj.previous_page_number}}</a>
            </li>
        {% endif %}
        <li class="pagination__item pagination__item_current">
            <a href="?page={{page_obj.number}}&news_per_page={{news_per_page}}{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">{{page_obj.number}}</a>
        </li>
        {% if page_obj.number != page_obj.paginator.num_pages %}
            <li class="pagination__item">
                <a href="?page={{page_obj.next_page_number}}&news_per_page={{news_per_page}}{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">{{page_obj.next_page_number}}</a>
            </li>
            {% if page_obj.number != penultimate_page %}
                <li class="pagination__item">
                    <a href="?page={{page_obj.paginator.num_pages}}&news_per_page={{news_per_page}}{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">&gt;&gt;</a>
                </li>
            {% endif %}
        {% endif %}
    </ul>
    <ul class="pagination__list pagination__list_options">
        <div class="pagination__text">News per page</div>
        <li class="pagination__item">
            <a href="?page={{page_obj.number}}&news_per_page=10{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">10</a>
        </li>
        <li class="pagination__item">
            <a href="?page={{page_obj.number}}&news_per_page=20{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">20</a>
        </li>
        <li class="pagination__item">
            <a href="?page={{page_obj.number}}&news_per_page=50{% for key,value in request.GET.items %}{% if key != 'page' and key != 'news_per_page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}" class="pagination__link">50</a>
        </li>
    </ul>
</div>
<script src="{% static 'news.bundle.js' %}"></script>
{% endblock %}